import React,{useEffect,useState}from 'react'; import {api,setToken} from '../api';
export default function Dashboard(){const[jwt,setJwt]=useState(localStorage.getItem('jwt')||'');const[edus,setEdus]=useState([]);const[projects,setProjects]=useState([]);const[form,setForm]=useState({school:'',program:'',level:'',startDate:''});useEffect(()=>{setToken(jwt);api.get('/educations').then(r=>setEdus(r.data));api.get('/projects').then(r=>setProjects(r.data));},[jwt]);const addEdu=async(e)=>{e.preventDefault();await api.post('/educations',form);const{data}=await api.get('/educations');setEdus(data);setForm({school:'',program:'',level:'',startDate:''});};return(<div><h2>Admin Dashboard</h2><label>JWT:</label><input value={jwt} onChange={e=>{setJwt(e.target.value);localStorage.setItem('jwt',e.target.value)}} style={{width:'100%'}}/><h3>Add Education</h3><form onSubmit={addEdu}><input placeholder="school" value={form.school} onChange={e=>setForm({...form,school:e.target.value})}/><br/><input placeholder="program" value={form.program} onChange={e=>setForm({...form,program:e.target.value})}/><br/><input placeholder="level" value={form.level} onChange={e=>setForm({...form,level:e.target.value})}/><br/><input placeholder="startDate" value={form.startDate} onChange={e=>setForm({...form,startDate:e.target.value})}/><br/><button>Add</button></form><h3>Educations</h3><ul>{edus.map(e=>(<li key={e._id}>{e.school} â€“ {e.program}</li>))}</ul><h3>Projects</h3><ul>{projects.map(p=>(<li key={p._id}>{p.title}</li>))}</ul></div>)}